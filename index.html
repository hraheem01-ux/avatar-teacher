<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</title>

  <style>
    :root{
      --bg:#020617;
      --glass:rgba(2,6,23,.55);
      --glass2:rgba(2,6,23,.72);
      --line:rgba(148,163,184,.22);
      --txt:#f8fafc;
      --muted:#cbd5e1;
      --green:#22c55e;
      --blue:#0ea5e9;
      --red:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);color:var(--txt);
      font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial,sans-serif;
      height:100vh;overflow:hidden;
    }

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙˆØ±Ø© */
    .stage{position:fixed;inset:0;overflow:hidden}
    #avatarPoster{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:cover;
      object-position:center 20%; /* ÙŠØ±ÙØ¹ Ø§Ù„ÙˆØ¬Ù‡ Ø´ÙˆÙŠ ÙÙˆÙ‚ */
      transform:scale(1.02);
      filter:contrast(1.05) saturate(1.05);
    }

    /* ØªØºÙ…ÙŠÙ‚ + ÙÙŠÙ†ÙŠØª Ø¹Ø´Ø§Ù† Ø§Ù„ÙƒØ§Ø±Ø¯ ÙŠØ¨Ø§Ù† ÙˆÙ…Ø§ ÙŠØ¯ÙÙ† Ø§Ù„ÙˆØ¬Ù‡ */
    .vignette{
      position:absolute; inset:0;
      background:
        radial-gradient(1200px 700px at 50% 25%, rgba(0,0,0,.15) 0%, rgba(0,0,0,.55) 55%, rgba(0,0,0,.72) 100%),
        linear-gradient(to bottom, rgba(0,0,0,.12), rgba(0,0,0,.55));
      pointer-events:none;
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙÙˆÙ‚ */
    .brand{
      position:absolute; top:16px; left:16px; right:16px;
      width:min(980px,96vw); margin:0 auto;
      background:rgba(2,6,23,.35);
      border:1px solid rgba(148,163,184,.18);
      backdrop-filter:blur(10px);
      border-radius:18px;
      padding:14px 16px;
      text-align:center;
    }
    .brand h1{margin:0;font-size:30px;letter-spacing:.2px}
    .brand p{margin:6px 0 0;color:var(--muted);font-size:14px}

    /* Ø§Ù„ÙƒØ§Ø±Ø¯ ØªØ­Øª (Ø¨Ø¯Ù„ Ù…Ø§ ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡) */
    .panelWrap{
      position:absolute; left:0; right:0; bottom:0;
      padding:16px 16px 18px;
      display:flex; justify-content:center;
    }
    .panel{
      width:min(980px,96vw);
      background:var(--glass2);
      border:1px solid var(--line);
      backdrop-filter:blur(12px);
      border-radius:20px;
      padding:14px;
      box-shadow:0 24px 80px rgba(0,0,0,.55);
    }

    .subs{
      width:100%;
      border-radius:14px;
      background:rgba(2,6,23,.35);
      border:1px solid rgba(148,163,184,.16);
      padding:10px 12px;
      text-align:center;
      color:var(--muted);
      margin-bottom:10px;
      min-height:44px;
      display:flex; align-items:center; justify-content:center;
      font-size:14px;
    }

    .chat{
      height:min(24vh,220px);
      overflow:auto;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.18);
      background:rgba(2,6,23,.25);
      padding:12px;
      line-height:1.75;
      font-size:15px;
    }

    .row{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:12px; align-items:center;
    }
    button{
      border:0; cursor:pointer;
      padding:14px 16px;
      border-radius:999px;
      font-size:16px;
      font-weight:900;
      flex:1;
      min-width:220px;
    }
    #micBtn{background:var(--green);color:#052e16}
    #micBtn.recording{background:var(--red);color:#fff}
    #askBtn{background:var(--blue);color:#e0f2fe}

    .inputRow{
      display:flex; gap:10px; margin-top:10px;
    }
    #textInput{
      flex:1;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.22);
      background:rgba(2,6,23,.55);
      color:var(--txt);
      outline:none;
      font-size:15px;
    }
    #sendBtn{
      flex:0;
      min-width:160px;
      background:rgba(15,23,42,.85);
      color:var(--txt);
      border:1px solid rgba(148,163,184,.22);
    }

    .status{
      margin-top:10px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }

    /* Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ Ù†Ø®Ù„ÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ø£Ø¹Ù„Ù‰ Ø´ÙˆÙŠ */
    @media (max-width:560px){
      .brand h1{font-size:24px}
      #avatarPoster{object-position:center 15%}
      .panel{padding:12px}
    }
  </style>
</head>

<body>
  <div class="stage">
    <!-- âœ… ØºÙŠÙ‘Ø± Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§ ÙÙ‚Ø· -->
    <img id="avatarPoster" src="https://i.ibb.co/79tBtzg/Avatar.jpg" alt="Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ">
    <div class="vignette"></div>

    <div class="brand">
      <h1>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</h1>
      <p>Ø§Ø³Ø£Ù„Ù†ÙŠ ØµÙˆØªÙŠÙ‹Ø§ Ø£Ùˆ ÙƒØªØ§Ø¨ÙŠÙ‹Ø§</p>
    </div>

    <div class="panelWrap">
      <div class="panel">
        <div id="subs" class="subs">Ø¬Ø§Ù‡Ø² Ù„Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯.</div>

        <div id="chatLog" class="chat">
          <div>ğŸ‘¨â€ğŸ“ Ø§Ù„Ø·Ø§Ù„Ø¨: Ù…Ø±Ø­Ø¨Ù‹Ø§</div>
          <div>ğŸ¤– Ø§Ù„Ù…Ø¹Ù„Ù…: Ø£Ù‡Ù„Ù‹Ø§ Ø¨ÙƒØŒ Ø§Ø·Ø±Ø­ Ø³Ø¤Ø§Ù„Ùƒ.</div>
        </div>

        <div class="row">
          <button id="micBtn">ğŸ™ï¸ Ø§Ø¶ØºØ· ÙˆØªØ­Ø¯Ù‘Ø«</button>
          <button id="askBtn">âœï¸ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„</button>
        </div>

        <div id="inputRow" class="inputRow" style="display:none">
          <input id="textInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." />
          <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>

        <div id="status" class="status">Ø§ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø¹Ù„Ù‰ Chrome ÙˆØ§Ø³Ù…Ø­ Ø¨Ø§Ù„Ù…Ø§ÙŠÙƒ.</div>
      </div>
    </div>
  </div>

<script>
  const micBtn   = document.getElementById('micBtn');
  const askBtn   = document.getElementById('askBtn');
  const chatLog  = document.getElementById('chatLog');
  const subsEl   = document.getElementById('subs');
  const statusEl = document.getElementById('status');

  const inputRow = document.getElementById('inputRow');
  const textInput= document.getElementById('textInput');
  const sendBtn  = document.getElementById('sendBtn');

  function add(prefix, text){
    const d=document.createElement('div');
    d.textContent=prefix+text;
    chatLog.appendChild(d);
    chatLog.scrollTop=chatLog.scrollHeight;
  }
  function setSubs(t){ subsEl.textContent = t || ''; }

  // ====== ÙƒØªØ§Ø¨Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© (Ø¨Ø¯ÙˆÙ† prompt) ======
  askBtn.onclick = ()=>{
    inputRow.style.display = (inputRow.style.display === 'none') ? 'flex' : 'none';
    if(inputRow.style.display !== 'none') textInput.focus();
  };
  function sendText(){
    const q = (textInput.value||'').trim();
    if(!q) return;
    add("ğŸ‘¨â€ğŸ“ Ø§Ù„Ø·Ø§Ù„Ø¨: ", q);
    // Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ ØªØ±Ø¨Ø·Ù‡ Ø¨Ù€ GPT
    add("ğŸ¤– Ø§Ù„Ù…Ø¹Ù„Ù…: ", "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø³Ø¤Ø§Ù„Ùƒ.");
    textInput.value='';
    setSubs("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„.");
  }
  sendBtn.onclick = sendText;
  textInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') sendText(); });

  // ====== Ù…Ø§ÙŠÙƒ Ø§Ø­ØªØ±Ø§ÙÙŠ Start/Stop ======
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  let recognition = null;
  let isListening = false;

  if(!SR){
    micBtn.disabled = true;
    micBtn.style.opacity = .6;
    statusEl.textContent = "Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª. Ø§Ø³ØªØ®Ø¯Ù… Chrome.";
  } else {
    recognition = new SR();
    recognition.lang = 'ar-SA';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onstart = ()=>{
      isListening = true;
      micBtn.classList.add('recording');
      micBtn.textContent = "ğŸ›‘ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„";
      setSubs("ØªØ­Ø¯Ø« Ø§Ù„Ø¢Ù†...");
      statusEl.textContent = "ğŸ™ï¸ ÙŠØ³ØªÙ…Ø¹...";
    };

    recognition.onerror = (e)=>{
      isListening = false;
      micBtn.classList.remove('recording');
      micBtn.textContent = "ğŸ™ï¸ Ø§Ø¶ØºØ· ÙˆØªØ­Ø¯Ù‘Ø«";
      setSubs("Ø­ØµÙ„ Ø®Ø·Ø£.");
      statusEl.textContent = "âš ï¸ Ø®Ø·Ø£ Ø¨Ø§Ù„Ù…Ø§ÙŠÙƒ: " + (e.error || '');
    };

    recognition.onend = ()=>{
      isListening = false;
      micBtn.classList.remove('recording');
      micBtn.textContent = "ğŸ™ï¸ Ø§Ø¶ØºØ· ÙˆØªØ­Ø¯Ù‘Ø«";
      statusEl.textContent = "Ø¬Ø§Ù‡Ø².";
      // Ù„Ø§ Ù†ØºÙŠØ± subs Ù‡Ù†Ø§ Ù„Ùˆ ÙƒØ§Ù† ÙÙŠÙ‡ Ù†Øµ
    };

    recognition.onresult = (event)=>{
      const transcript = event.results[0][0].transcript;
      add("ğŸ‘¨â€ğŸ“ Ø§Ù„Ø·Ø§Ù„Ø¨: ", transcript);
      setSubs("ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø³Ø¤Ø§Ù„Ùƒ ØµÙˆØªÙŠÙ‹Ø§.");
      // Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ ØªØ±Ø¨Ø·Ù‡ Ø¨Ù€ GPT
      add("ğŸ¤– Ø§Ù„Ù…Ø¹Ù„Ù…: ", "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø³Ø¤Ø§Ù„Ùƒ.");
    };

    micBtn.onclick = ()=>{
      // Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ "Gesture" Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… â€” ÙˆÙ‡Ø°Ø§ ÙŠØªØ­Ù‚Ù‚ Ù„Ø£Ù†Ùƒ Ø¶ØºØ·Øª Ø²Ø±
      if(!isListening){
        try { recognition.start(); }
        catch(e){ /* Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ start Ù…Ø±ØªÙŠÙ† Ø¨Ø³Ø±Ø¹Ø© */ }
      } else {
        recognition.stop();
      }
    };
  }
</script>

</body>
</html>
